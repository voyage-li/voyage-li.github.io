<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/images/icons/favicon-16x16.png?v=2.6.2" type="image/png" sizes="16x16"><link rel="icon" href="/images/icons/favicon-96x96.png?v=2.6.2" type="image/png" sizes="32x32"><link rel="apple-touch-icon" href="/images/icons/apple-touch-icon.png?v=2.6.2" sizes="180x180"><link rel="mask-icon" href="/images/icons/stun-logo.svg?v=2.6.2" color="#54bcff"><meta name="msapplication-TileImage" content="/images/icons/favicon-144x144.png"><meta name="msapplication-TileColor" content="#000000"><meta name="msvalidate.01" content="16024CC771E07E05BB6EB2B4C522B897"><meta name="baidu-site-verification" content="code-xh2oqTvRGY"><meta name="description" content="程序设计二 大作业      设计一款软件可以把markdown语言转化成HTML语言。即输入markdown语言，软件输出HTML语言。软件需要将GFM规范中常用到的Text，Headers，List，Images，Links五项内容转化成HTML语言。从用户的角度出发，还要拥有GUI                      一、设计思路         打开文件(判断是否为markdown"><meta property="og:type" content="article"><meta property="og:title" content="Markdown转Html"><meta property="og:url" content="https://voyage-li.github.io/2021/07/15/md-html/index.html"><meta property="og:site_name" content="Twilight"><meta property="og:description" content="程序设计二 大作业      设计一款软件可以把markdown语言转化成HTML语言。即输入markdown语言，软件输出HTML语言。软件需要将GFM规范中常用到的Text，Headers，List，Images，Links五项内容转化成HTML语言。从用户的角度出发，还要拥有GUI                      一、设计思路         打开文件(判断是否为markdown"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2021-07-14T16:00:00.000Z"><meta property="article:modified_time" content="2021-07-14T16:00:00.000Z"><meta property="article:author" content="voyage"><meta property="article:tag" content="正则表达式"><meta property="article:tag" content="GUI"><meta property="article:tag" content="Qt"><meta name="twitter:card" content="summary"><title>Markdown转Html | Twilight</title><link ref="canonical" href="https://voyage-li.github.io/2021/07/15/md-html/"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.6.2"><script>var Stun=window.Stun||{},CONFIG={root:"/",algolia:void 0,assistSearch:void 0,fontIcon:{prompt:{success:"fas fa-check-circle",info:"fas fa-arrow-circle-right",warning:"fas fa-exclamation-circle",error:"fas fa-times-circle"},copyBtn:"fas fa-copy"},sidebar:{offsetTop:"20px",tocMaxDepth:6},header:void 0,postWidget:{endText:!0},nightMode:{enable:!0},back2top:{enable:!0},codeblock:{style:"carbon",highlight:"light",wordWrap:!1},reward:!1,fancybox:!0,zoomImage:{gapAside:"20px"},galleryWaterfall:void 0,lazyload:!0,pjax:{avoidBanner:!0},externalLink:void 0,shortcuts:void 0,prompt:{copyButton:"复制",copySuccess:"复制成功",copyError:"复制失败"},sourcePath:{js:"js",css:"css",images:"images"}};window.CONFIG=CONFIG</script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Twilight" type="application/atom+xml"></head><body><div id="loader-wrapper"><div id="loader"></div><div class="loader-section section-left"></div><div class="loader-section section-right"></div></div><div class="container" id="container"><header class="header" id="header"><div class="header-inner header-inner--height header-inner--bgcolor"><nav class="header-nav header-nav--sticky"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">首页</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/about"><span class="header-nav-menu-item__icon"><i class="fas fa-user"></i></span><span class="header-nav-menu-item__text">关于</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="javascript:;" onclick="return!1"><span class="header-nav-menu-item__icon"><i class="fas fa-database"></i></span><span class="header-nav-menu-item__text">统计</span></a><div class="header-nav-submenu"><div class="header-nav-submenu-item"><a class="header-nav-submenu-item__link" href="/archives/"><span class="header-nav-submenu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-submenu-item__text">归档</span></a></div><div class="header-nav-submenu-item"><a class="header-nav-submenu-item__link" href="/categories/"><span class="header-nav-submenu-item__icon"><i class="fas fa-layer-group"></i></span><span class="header-nav-submenu-item__text">分类</span></a></div><div class="header-nav-submenu-item"><a class="header-nav-submenu-item__link" href="/tags/"><span class="header-nav-submenu-item__icon"><i class="fas fa-tags"></i></span><span class="header-nav-submenu-item__text">标签</span></a></div></div></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/message/"><span class="header-nav-menu-item__icon"><i class="fas fa-comment"></i></span><span class="header-nav-menu-item__text">留言</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/history/"><span class="header-nav-menu-item__icon"><i class="fa fa-history"></i></span><span class="header-nav-menu-item__text">历史</span></a></div></div><div class="header-nav-search"><span class="header-nav-search__icon"><i class="fas fa-search"></i></span><span class="header-nav-search__text">搜索</span></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content" id="content"><div id="is-post"></div><div class="post"><header class="post-header"><h1 class="post-title">Markdown转Html</h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">发表于</span><span class="post-meta-item__value">2021-07-15</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">更新于</span><span class="post-meta-item__value">2021-07-15</span></span><span class="post-meta-item post-meta-item--wordcount"><span class="post-meta-item__icon"><i class="far fa-file-word"></i></span><span class="post-meta-item__info">字数统计</span><span class="post-meta-item__value">1.4k</span></span><span class="post-meta-item post-meta-item--visitors leancloud_visitors" id="/2021/07/15/md-html/" data-flag-title="Markdown转Html"><span class="post-meta-item__icon"><i class="fas fa-eye"></i></span><span class="post-meta-item__info">阅读次数</span><span class="post-meta-item__value leancloud-visitors-count"></span></span></div></header><div class="post-body"><blockquote><p><strong>程序设计二 大作业</strong></p></blockquote><p>    设计一款软件可以把markdown语言转化成HTML语言。即输入markdown语言，软件输出HTML语言。软件需要将GFM规范中常用到的Text，Headers，List，Images，Links五项内容转化成HTML语言。从用户的角度出发，还要拥有GUI</p><h3 id="一-设计思路"><a href="#一-设计思路" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#一-设计思路"></a> 一、设计思路</h3><ul><li>打开文件(判断是否为markdown文件)</li><li>读取文件全部内容</li><li>输出html标签</li><li>选择写入的css样式</li><li>主题转换部分使用正则表达式</li><li>输出固定的结尾</li></ul><span id="more"></span><h3 id="二-转换方法"><a href="#二-转换方法" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#二-转换方法"></a> 二、转换方法</h3><h4 id="1-text"><a href="#1-text" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#1-text"></a> 1. Text</h4><p>需要转化的正文部分有加粗，斜体，删除线，简单单行代码块，高亮<br>以加粗为例，则需要完成的转化为:</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∗</mo><mo>∗</mo><mi>i</mi><mi>n</mi><mi>f</mi><mi>o</mi><mo>∗</mo><mo>∗</mo><mtext> </mtext><mo>⇒</mo><mtext> </mtext><mo>&lt;</mo><mi>b</mi><mo>&gt;</mo><mi>i</mi><mi>n</mi><mi>f</mi><mi>o</mi><mo>&lt;</mo><mi mathvariant="normal">/</mi><mi>b</mi><mo>&gt;</mo></mrow><annotation encoding="application/x-tex">**info** \ \Rightarrow \ &lt;b&gt;info&lt;/b&gt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.46528em;vertical-align:0"></span><span class="mord">∗</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:.8888799999999999em;vertical-align:-.19444em"></span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:.10764em">f</span><span class="mord mathdefault">o</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:.46528em;vertical-align:0"></span><span class="mord">∗</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mspace"> </span><span class="mrel">⇒</span><span class="mspace"> </span></span><span class="base"><span class="strut" style="height:.5782em;vertical-align:-.0391em"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.73354em;vertical-align:-.0391em"></span><span class="mord mathdefault">b</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.8888799999999999em;vertical-align:-.19444em"></span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:.10764em">f</span><span class="mord mathdefault">o</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord">/</span><span class="mord mathdefault">b</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">&gt;</span></span></span></span></span></p><p>转换时使用正则表达式(s为代转换字符串):</p><figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">std::string temp, temp2;</span><br><span class="line"><span class="function">std::regex <span class="title">re_b</span><span class="params">(<span class="string">&quot;\\*\\*([^\\*\\*]+)\\*\\*&quot;</span>)</span></span>;</span><br><span class="line">temp = s;</span><br><span class="line">std::<span class="built_in">regex_replace</span>(std::<span class="built_in">back_inserter</span>(temp2), temp.<span class="built_in">begin</span>(), temp.<span class="built_in">end</span>(), re_b, <span class="string">&quot;&lt;b&gt;$1&lt;/b&gt;&quot;</span>);</span><br><span class="line">s = temp2;</span><br></pre></td></tr></table></div></figure><p>依次可完成加粗的转换，下面给出不同格式的正则表达式</p><figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::regex <span class="title">re_i1</span><span class="params">(<span class="string">&quot;\\*([^\\*]+)\\*&quot;</span>)</span></span>;            <span class="comment">//斜体</span></span><br><span class="line"><span class="function">std::regex <span class="title">re_i2</span><span class="params">(<span class="string">&quot;\\_([^\\_]+)\\_&quot;</span>)</span></span>;            <span class="comment">//斜体</span></span><br><span class="line"><span class="function">std::regex <span class="title">re_S</span><span class="params">(<span class="string">&quot;\\~\\~([^\\~\\~]+)\\~\\~&quot;</span>)</span></span>;    <span class="comment">//删除线</span></span><br><span class="line"><span class="function">std::regex <span class="title">re_b1</span><span class="params">(<span class="string">&quot;\\*\\*([^\\*\\*]+)\\*\\*&quot;</span>)</span></span>;   <span class="comment">//加粗</span></span><br><span class="line"><span class="function">std::regex <span class="title">re_b2</span><span class="params">(<span class="string">&quot;\\_\\_([^\\_\\_]+)\\_\\_&quot;</span>)</span></span>;   <span class="comment">//加粗</span></span><br><span class="line"><span class="function">std::regex <span class="title">re_code</span><span class="params">(<span class="string">&quot;\\`([^\\`]+)\\`&quot;</span>)</span></span>;          <span class="comment">//简单代码块</span></span><br><span class="line"><span class="function">std::regex <span class="title">re_mark</span><span class="params">(<span class="string">&quot;\\=\\=([^\\=\\=]+)\\=\\=&quot;</span>)</span></span>; <span class="comment">//高亮显示</span></span><br></pre></td></tr></table></div></figure><h4 id="2-headers"><a href="#2-headers" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#2-headers"></a> 2. Headers</h4><p>需要完成的转换为:</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><munder><munder><mrow><mi mathvariant="normal">#</mi><mi mathvariant="normal">#</mi><mo>⋯</mo></mrow><mo stretchy="true">⏟</mo></munder><mi>n</mi></munder><mtext>  </mtext><mi>t</mi><mi>e</mi><mi>x</mi><mi>t</mi><mo>⇒</mo><mtext> </mtext><mo>&lt;</mo><mi>h</mi><mi>n</mi><mo>&gt;</mo><mi>t</mi><mi>e</mi><mi>x</mi><mi>t</mi><mo>&lt;</mo><mi mathvariant="normal">/</mi><mi>h</mi><mi>n</mi><mo>&gt;</mo></mrow><annotation encoding="application/x-tex">\underbrace{\#\#\cdots}_{n}\ \ text \Rightarrow \ &lt;hn&gt;text&lt;/hn&gt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.038272em;vertical-align:-1.343832em"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.69444em"><span style="top:-1.656168em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.6944399999999998em"><span class="svg-align" style="top:-2.15756em"><span class="pstrut" style="height:3em"></span><span class="stretchy" style="height:.548em;min-width:1.6em"><span class="brace-left" style="height:.548em"><svg width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMinYMin slice"><path d="M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z"/></svg></span><span class="brace-center" style="height:.548em"><svg width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMidYMin slice"><path d="M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z"/></svg></span><span class="brace-right" style="height:.548em"><svg width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMaxYMin slice"><path d="M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z"/></svg></span></span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">#</span><span class="mord">#</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="minner">⋯</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.8424400000000001em"><span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.343832em"><span></span></span></span></span></span><span class="mspace"> </span><span class="mspace"> </span><span class="mord mathdefault">t</span><span class="mord mathdefault">e</span><span class="mord mathdefault">x</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">⇒</span><span class="mspace"> </span></span><span class="base"><span class="strut" style="height:.5782em;vertical-align:-.0391em"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.73354em;vertical-align:-.0391em"></span><span class="mord mathdefault">h</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.65418em;vertical-align:-.0391em"></span><span class="mord mathdefault">t</span><span class="mord mathdefault">e</span><span class="mord mathdefault">x</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord">/</span><span class="mord mathdefault">h</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">&gt;</span></span></span></span></span></p><p>所以需要先统计’#'出现的次数，再进行转换:</p><figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">tr_head</span><span class="params">(std::string s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (s[index] == <span class="string">&#x27;#&#x27;</span>)</span><br><span class="line">        index++;</span><br><span class="line">    std::smatch answer;</span><br><span class="line">    std::<span class="built_in">regex_match</span>(s, answer, std::<span class="built_in">regex</span>(<span class="string">&quot;^#&#123;1,6&#125; (.+)$&quot;</span>));</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;&lt;h&quot;</span> &lt;&lt; index &lt;&lt; <span class="string">&quot;&gt;&quot;</span> &lt;&lt; answer[<span class="number">1</span>] &lt;&lt; <span class="string">&quot;&lt;/h&quot;</span> &lt;&lt; index &lt;&lt; <span class="string">&quot;&gt;&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure><h4 id="3-images"><a href="#3-images" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#3-images"></a> 3. Images</h4><p>需要完成的转换</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">!</mo><mo stretchy="false">[</mo><mi>n</mi><mi>a</mi><mi>m</mi><mi>e</mi><mo stretchy="false">]</mo><mo stretchy="false">(</mo><mi>u</mi><mi>r</mi><mi>l</mi><mo stretchy="false">)</mo><mtext> </mtext><mo>⇒</mo><mtext> </mtext><mo>&lt;</mo><mi>i</mi><mi>m</mi><mi>g</mi><mtext>  </mtext><mi>s</mi><mi>r</mi><mi>c</mi><mo>=</mo><mi mathvariant="normal">‘</mi><mi mathvariant="normal">‘</mi><mi>u</mi><mi>r</mi><mi>l</mi><mi mathvariant="normal">&quot;</mi><mo>&gt;</mo></mrow><annotation encoding="application/x-tex">![name](url) \ \Rightarrow \ &lt;img\ \ src=``url&quot;&gt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mclose">!</span><span class="mopen">[</span><span class="mord mathdefault">n</span><span class="mord mathdefault">a</span><span class="mord mathdefault">m</span><span class="mord mathdefault">e</span><span class="mclose">]</span><span class="mopen">(</span><span class="mord mathdefault">u</span><span class="mord mathdefault" style="margin-right:.02778em">r</span><span class="mord mathdefault" style="margin-right:.01968em">l</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mspace"> </span><span class="mrel">⇒</span><span class="mspace"> </span></span><span class="base"><span class="strut" style="height:.5782em;vertical-align:-.0391em"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.85396em;vertical-align:-.19444em"></span><span class="mord mathdefault">i</span><span class="mord mathdefault">m</span><span class="mord mathdefault" style="margin-right:.03588em">g</span><span class="mspace"> </span><span class="mspace"> </span><span class="mord mathdefault">s</span><span class="mord mathdefault" style="margin-right:.02778em">r</span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.73354em;vertical-align:-.0391em"></span><span class="mord">‘</span><span class="mord">‘</span><span class="mord mathdefault">u</span><span class="mord mathdefault" style="margin-right:.02778em">r</span><span class="mord mathdefault" style="margin-right:.01968em">l</span><span class="mord">&quot;</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">&gt;</span></span></span></span></span></p><p>转换方法同前面类似，下面给出识别的正则表达式</p><figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::regex <span class="title">re_image</span><span class="params">(<span class="string">&quot;!\\[.+\\]\\((.+)\\)&quot;</span>)</span></span>;</span><br></pre></td></tr></table></div></figure><h4 id="4-links"><a href="#4-links" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#4-links"></a> 4. Links</h4><p>需要完成的转换</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><mi>n</mi><mi>a</mi><mi>m</mi><mi>e</mi><mo stretchy="false">]</mo><mo stretchy="false">(</mo><mi>u</mi><mi>r</mi><mi>l</mi><mo stretchy="false">)</mo><mtext> </mtext><mo>⇒</mo><mtext> </mtext><mo>&lt;</mo><mi>a</mi><mtext>  </mtext><mi>h</mi><mi>r</mi><mi>e</mi><mi>f</mi><mo>=</mo><mi mathvariant="normal">‘</mi><mi mathvariant="normal">‘</mi><mi>u</mi><mi>r</mi><mi>l</mi><mi mathvariant="normal">&quot;</mi><mo>&gt;</mo><mi>n</mi><mi>a</mi><mi>m</mi><mi>e</mi><mo>&lt;</mo><mi mathvariant="normal">/</mi><mi>a</mi><mo>&gt;</mo></mrow><annotation encoding="application/x-tex">[name](url) \ \Rightarrow \ &lt;a\ \ href=``url&quot;&gt;name&lt;/a&gt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">[</span><span class="mord mathdefault">n</span><span class="mord mathdefault">a</span><span class="mord mathdefault">m</span><span class="mord mathdefault">e</span><span class="mclose">]</span><span class="mopen">(</span><span class="mord mathdefault">u</span><span class="mord mathdefault" style="margin-right:.02778em">r</span><span class="mord mathdefault" style="margin-right:.01968em">l</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mspace"> </span><span class="mrel">⇒</span><span class="mspace"> </span></span><span class="base"><span class="strut" style="height:.5782em;vertical-align:-.0391em"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.8888799999999999em;vertical-align:-.19444em"></span><span class="mord mathdefault">a</span><span class="mspace"> </span><span class="mspace"> </span><span class="mord mathdefault">h</span><span class="mord mathdefault" style="margin-right:.02778em">r</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:.10764em">f</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.73354em;vertical-align:-.0391em"></span><span class="mord">‘</span><span class="mord">‘</span><span class="mord mathdefault">u</span><span class="mord mathdefault" style="margin-right:.02778em">r</span><span class="mord mathdefault" style="margin-right:.01968em">l</span><span class="mord">&quot;</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.5782em;vertical-align:-.0391em"></span><span class="mord mathdefault">n</span><span class="mord mathdefault">a</span><span class="mord mathdefault">m</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord">/</span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">&gt;</span></span></span></span></span></p><p>直接给出正则表达式</p><figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::regex <span class="title">re_image</span><span class="params">(<span class="string">&quot;\\[.+\\]\\((.+)\\)&quot;</span>)</span></span>;</span><br></pre></td></tr></table></div></figure><h4 id="5-lists"><a href="#5-lists" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#5-lists"></a> 5. Lists</h4><ul><li>整个翻译开始前先进行列表的递归搜索</li><li>先判断是否是列表，然后返回一个奇数或者偶数来代表判断返回的是有序列表还是无序列表，同时该数据还能储存空行数</li><li>若是列表，则判断与上一级的前面空格的关系，判断是否是新的一级列表，进入下一次递归，若上一级列表已经结束，则回溯到同一级列表处</li><li>整个列表结束时，返回，输出结尾的<code>&lt;/ol&gt;</code>或则和<code>&lt;/ul&gt;</code>，结束递归</li></ul><p>具体的代码如下</p><figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">islist</span><span class="params">(<span class="keyword">int</span> i)</span><span class="comment">//判断是否为列表</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">    <span class="function">std::regex <span class="title">a</span><span class="params">(<span class="string">&quot;^[ ]*[-*+] (.+)$&quot;</span>)</span></span>;</span><br><span class="line">    <span class="function">std::regex <span class="title">e</span><span class="params">(<span class="string">&quot;^[ ]*\\d+[.] (.+)$&quot;</span>)</span></span>;</span><br><span class="line">    <span class="keyword">if</span> (std::<span class="built_in">regex_search</span>(content[i], e))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; content[i][j] == <span class="string">&#x27; &#x27;</span>; j++)</span><br><span class="line">            index++;</span><br><span class="line">        <span class="keyword">if</span> (index % <span class="number">4</span> == <span class="number">0</span>)</span><br><span class="line">            content[i] = std::<span class="built_in">regex_replace</span>(content[i], e, <span class="string">&quot;&lt;li&gt;$1&lt;/li&gt;&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> * index;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (std::<span class="built_in">regex_search</span>(content[i], a))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; content[i][j] == <span class="string">&#x27; &#x27;</span>; j++)</span><br><span class="line">            index++;</span><br><span class="line">        <span class="keyword">if</span> (index % <span class="number">4</span> == <span class="number">0</span>)</span><br><span class="line">            content[i] = std::<span class="built_in">regex_replace</span>(content[i], a, <span class="string">&quot;&lt;li&gt;$1&lt;/li&gt;&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> * index + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">blankjudge</span><span class="params">(<span class="keyword">int</span> a)</span><span class="comment">//判断空格无序还是有序</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (a % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> a / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in"><span class="keyword">return</span></span> (a - <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">handlelist</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> blanklast)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    now = i;</span><br><span class="line">    <span class="keyword">int</span> blankthis = <span class="built_in">islist</span>(i);</span><br><span class="line">    <span class="keyword">if</span> (blankthis == <span class="number">-1</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> blankthis_temp = <span class="built_in">blankjudge</span>(blankthis);</span><br><span class="line">        <span class="keyword">int</span> blanklast_temp = <span class="built_in">blankjudge</span>(blanklast);</span><br><span class="line">        <span class="keyword">if</span> (blankthis % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (blankthis_temp &gt; blanklast_temp || (blankthis_temp == blanklast_temp &amp;&amp; blankthis != blanklast))<span class="comment">//新的一层列表</span></span><br><span class="line">            &#123;</span><br><span class="line">                content[i].<span class="built_in">insert</span>(<span class="number">0</span>, <span class="string">&quot;&lt;ol&gt;&quot;</span>);</span><br><span class="line">                <span class="keyword">int</span> tmp = <span class="built_in">handlelist</span>(i + <span class="number">1</span>, blankthis);</span><br><span class="line">                <span class="keyword">if</span> (tmp == blankthis_temp)</span><br><span class="line">                    tmp = <span class="built_in">handlelist</span>(now + <span class="number">1</span>, blankthis);</span><br><span class="line">                content[now - <span class="number">1</span>] += <span class="string">&quot;&lt;/ol&gt;&quot;</span>;</span><br><span class="line">                <span class="keyword">return</span> tmp;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (blankthis_temp == blanklast_temp &amp;&amp; blankthis == blanklast)<span class="comment">//和上级相同</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">int</span> tmp = <span class="built_in">handlelist</span>(i + <span class="number">1</span>, blankthis);</span><br><span class="line">                <span class="keyword">return</span> tmp;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span><span class="comment">//上一级列表结束</span></span><br><span class="line">                <span class="keyword">return</span> blankthis_temp;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span><span class="comment">//同理</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (blankthis_temp &gt; blanklast_temp || (blankthis_temp == blanklast_temp &amp;&amp; blankthis != blanklast))</span><br><span class="line">            &#123;</span><br><span class="line">                content[i].<span class="built_in">insert</span>(<span class="number">0</span>, <span class="string">&quot;&lt;ul&gt;&quot;</span>);</span><br><span class="line">                <span class="keyword">int</span> tmp = <span class="built_in">handlelist</span>(i + <span class="number">1</span>, blankthis);</span><br><span class="line">                <span class="keyword">if</span> (tmp == blankthis_temp)</span><br><span class="line">                    tmp = <span class="built_in">handlelist</span>(now + <span class="number">1</span>, blankthis);</span><br><span class="line">                content[now - <span class="number">1</span>] += <span class="string">&quot;&lt;/ul&gt;&quot;</span>;</span><br><span class="line">                <span class="keyword">return</span> tmp;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (blankthis_temp == blanklast_temp &amp;&amp; blankthis == blanklast)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">int</span> tmp = <span class="built_in">handlelist</span>(i + <span class="number">1</span>, blankthis);</span><br><span class="line">                <span class="keyword">return</span> tmp;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="keyword">return</span> blankthis_temp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure><h4 id="6-quote"><a href="#6-quote" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#6-quote"></a> 6. Quote</h4><p>quote的转化和list基本相同，同时免去了有序无序的判断</p><figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">isquote</span><span class="params">(<span class="keyword">int</span> i)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">std::regex <span class="title">a</span><span class="params">(<span class="string">&quot;^\\&gt;+(.+)$&quot;</span>)</span></span>;</span><br><span class="line">    <span class="keyword">if</span> (std::<span class="built_in">regex_match</span>(content[i], a))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (content[i][index] == <span class="string">&#x27;&gt;&#x27;</span>)</span><br><span class="line">            index++;</span><br><span class="line">        content[i] = std::<span class="built_in">regex_replace</span>(content[i], a, <span class="string">&quot;&lt;p&gt;$1&lt;/p&gt;&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> index;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">handlequote</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> last)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    now = i;</span><br><span class="line">    <span class="keyword">int</span> number = <span class="built_in">isquote</span>(i);</span><br><span class="line">    <span class="keyword">if</span> (number == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (number &gt;= last)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; number - last; j++)</span><br><span class="line">            content[i].<span class="built_in">insert</span>(<span class="number">0</span>, <span class="string">&quot;&lt;blockquote&gt;&quot;</span>);</span><br><span class="line">        <span class="built_in">handlequote</span>(now + <span class="number">1</span>, number);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; number - last; j++)</span><br><span class="line">            content[now - <span class="number">1</span>] += <span class="string">&quot;&lt;/blockquote&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure><h4 id="7-分割线"><a href="#7-分割线" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#7-分割线"></a> 7. 分割线</h4><p>较为简单，直接给出转换函数</p><figure class="highlight c++"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (std::<span class="built_in">regex_search</span>(s.<span class="built_in">at</span>(i), std::<span class="built_in">regex</span>(<span class="string">&quot;^\\-&#123;3,&#125;$&quot;</span>)))</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;&lt;hr/&gt;\n&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (std::<span class="built_in">regex_search</span>(s.<span class="built_in">at</span>(i), std::<span class="built_in">regex</span>(<span class="string">&quot;^\\*&#123;3,&#125;$&quot;</span>)))</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;&lt;hr/&gt;\n&quot;</span>);</span><br></pre></td></tr></table></div></figure><h3 id="三-gui的实现"><a href="#三-gui的实现" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#三-gui的实现"></a> 三、GUI的实现</h3><p>依托Qt实现程序的图形化，相关内容可查看源码</p><h3 id="四-实验感想"><a href="#四-实验感想" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#四-实验感想"></a> 四、实验感想</h3><ul><li>学习了markdown及html相关语法</li><li>熟悉了正则表达式的使用</li><li>熟悉了c++图形化界面的设计</li></ul><h3 id="五-源码"><a href="#五-源码" class="heading-link"><i class="fas fa-link"></i></a><a class="markdownIt-Anchor" href="#五-源码"></a> 五、源码</h3><p>        <a target="_blank" rel="noopener" href="https://github.com/voyage-li/markdown-html">戳这里</a></p></div><footer class="post-footer"><div class="post-ending ending"><div class="ending__text">------ 本文结束，感谢您的阅读 ------</div></div><div class="post-tags"><span class="post-tags-item"><span class="post-tags-item__icon"><i class="fas fa-tag"></i></span><a class="post-tags-item__link" href="https://voyage-li.github.io/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">正则表达式</a></span><span class="post-tags-item"><span class="post-tags-item__icon"><i class="fas fa-tag"></i></span><a class="post-tags-item__link" href="https://voyage-li.github.io/tags/GUI/">GUI</a></span><span class="post-tags-item"><span class="post-tags-item__icon"><i class="fas fa-tag"></i></span><a class="post-tags-item__link" href="https://voyage-li.github.io/tags/Qt/">Qt</a></span></div><nav class="post-paginator paginator"><div class="paginator-prev"><a class="paginator-prev__link" href="/2021/07/18/MC-RED/"><span class="paginator-prev__icon"><i class="fas fa-angle-left"></i></span><span class="paginator-prev__text">MC红石特效的原理</span></a></div></nav></footer></div></div><div class="comments" id="comments"><div id="valine-container"></div></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><div class="sidebar_basic"><div class="sidebar-nav"><span class="sidebar-nav-toc current">文章目录</span><span class="sidebar-nav-ov">站点概览</span></div><section class="sidebar-toc"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80-%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF"><span class="toc-text">一、设计思路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C-%E8%BD%AC%E6%8D%A2%E6%96%B9%E6%B3%95"><span class="toc-text">二、转换方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-text"><span class="toc-text">1. Text</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-headers"><span class="toc-text">2. Headers</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-images"><span class="toc-text">3. Images</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-links"><span class="toc-text">4. Links</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-lists"><span class="toc-text">5. Lists</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-quote"><span class="toc-text">6. Quote</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E5%88%86%E5%89%B2%E7%BA%BF"><span class="toc-text">7. 分割线</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89-gui%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-text">三、GUI的实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B-%E5%AE%9E%E9%AA%8C%E6%84%9F%E6%83%B3"><span class="toc-text">四、实验感想</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94-%E6%BA%90%E7%A0%81"><span class="toc-text">五、源码</span></a></li></ol></section><section class="sidebar-ov hide"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><a href="/about"><img class="sidebar-ov-author__avatar_img" src="/images/icons/huan.svg" alt="avatar"></a></div><p class="sidebar-ov-author__text">每一天，每个季节都会过去， 然后就是新的开始</p></div><div class="sidebar-ov-social"><a class="sidebar-ov-social-item" href="https://github.com/voyage-li/" target="_blank" rel="noopener" data-popover="Github" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-github"></i></span></a><a class="sidebar-ov-social-item" href="mailto:voyage@mail.ustc.edu.cn" target="_blank" rel="noopener" data-popover="邮件" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fa fa-envelope"></i></span></a><a class="sidebar-ov-social-item" href="tencent://message?uin=923959605" target="_blank" rel="noopener" data-popover="QQ" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-qq"></i></span></a></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">14</div><div class="sidebar-ov-state-item__name">归档</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--categories" href="/categories/"><div class="sidebar-ov-state-item__count">10</div><div class="sidebar-ov-state-item__name">分类</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--tags" href="/tags/"><div class="sidebar-ov-state-item__count">15</div><div class="sidebar-ov-state-item__name">标签</div></a></div></section><div class="sidebar-reading"><div class="sidebar-reading-info"><span class="sidebar-reading-info__text">你已阅读了 </span><span class="sidebar-reading-info__num">0</span><span class="sidebar-reading-info__perc">%</span></div><div class="sidebar-reading-line"></div></div></div><div class="notice"><span class="notice_banner"><i class="fa fa-bell"></i></span><span class="notice_banner"> NOTICE</span><br><notice_text class="notice_text">反复刷新界面可能导致部分js失效</notice_text></div></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2021~2022</span><span class="footer__devider"></span><span>voyage</span></div><div class="busuanzi"><span class="busuanzi-siteuv"><span class="busuanzi-siteuv__icon"><i class="fas fa-user"></i></span><span class="busuanzi-siteuv__info">访问人数</span><span class="busuanzi-siteuv__value" id="busuanzi_value_site_uv"></span></span><span class="busuanzi-sitepv"><span class="busuanzi-siteuv__icon"><i class="fas fa-eye"></i></span><span class="busuanzi-siteuv__info">浏览总量</span><span class="busuanzi-siteuv__value" id="busuanzi_value_site_pv"></span></span></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-arrow-up"></i></span></div></div><div class="search-mask"></div><div class="search-popup"><span class="search-close"></span><div class="search-input"><input placeholder="搜索文章（支持多关键词，请用空格分隔）"></div><div class="search-results"></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11"></script><script src="/js/contribution.js"></script><script src="https://cdn.jsdelivr.net/npm/canvas-nest.js@1.0.1/dist/canvas-nest.min.js" color="0,0,0" opacity="0.5" count="99" zindex="-1"></script><script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lazyload@2.0.0-rc.2/lazyload.min.js"></script><script>function initSearch(){var c=!0,t="search.json";t?/json$/i.test(t)&&(c=!1):t="search.xml",$.ajax({url:"/"+t,dataType:c?"xml":"json",async:!0,success:function(t){function e(){var t=o.val().toLowerCase().trim(),h=t.split(/[\s]+/),d=[];1<h.length&&h.push(t),0<t.length&&n.forEach(function(t){var e=!1,n=t.title&&t.title.trim()||"[ 文章无标题 ]",o=n&&n.toLowerCase(),i=t.content&&t.content.replace(/<[^>]+>/g,""),c=i&&i.toLowerCase(),s=t.url&&decodeURI(t.url).replace(/\/{2,}/g,"/"),a=[],r=[];h.forEach(function(t){function e(e,t,n,o){if(!e||!t)return[];var i,c=0,s=[];for(n||(e=e.toLowerCase(),t=t.toLowerCase());-1!==(i=t.indexOf(e,c));){var r=!1;a.forEach(function(t){t.index===i&&t.word.length<e.length&&(t.word=e,r=!0)}),c=i+e.length,r||s.push({index:i,word:e,weight:o})}return s}a=a.concat(e(t,o,!1,f.title)),r=r.concat(e(t,c,!1,f.content))});var l=a.length,t=r.length;function u(n,t,e,o){if(n&&t&&t.length){var i="",c=e,o=o;return t.forEach(function(t){var e;t.index<c||(e=t.index+t.word.length,i+=n.slice(c,t.index),i+="<b>"+n.slice(t.index,e)+"</b>",c=e)}),i+=n.slice(c,o)}}(e=0<l||0<t?!0:e)&&([a,r].forEach(function(t){t.sort(function(t,e){return t.index-e.index})}),l={},t=a.length*f.title+r.length*f.content,e=u(n,a,0,n.length)||n,i=0<r.length?(n=r[0].index,u(i,r,20<n?n-20:0,n+180)):i.slice(0,200),l.title=e,l.content=i,l.url=s,l.weight=t,d.push(l))});var e="";d.length?(d.sort(function(t,e){return e.weight-t.weight}),e+="<ul>",d.forEach(function(t){e+='<li><a class="search-results-title" href="'+t.url+'">',e+=t.title,e+='</a><div class="search-results-content">',e+=t.content,e+="</div></li>"}),e+="</ul>"):e+='<div class="search-results-none"><i class="far fa-meh"></i></div>',i.html(e)}var n=c?$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get():t,o=$(".search-input input"),i=$(".search-results"),f={title:100,content:1};o.on("input",e),o.on("keyup",function(t){t.keyCode===Stun.utils.codeToKeyCode("Enter")&&e()})}})}function closeSearch(){$("body").css({overflow:"auto"}),$(".search-popup").css({display:"none"}),$(".search-mask").css({display:"none"})}function safeOpenUrl(t){var e=window.open();e.opener=null,e.location=t}function extSearch(t){var e=window.location.host,n=$(".search-input input").val().toLowerCase().trim();n?safeOpenUrl({google:"https://www.google.com/search?q=",bing:"https://cn.bing.com/search?q=",baidu:"https://www.baidu.com/s?ie=UTF-8&wd="}[t]+n+" site:"+e):Stun.utils.popAlert("warning","请输入字符")}window.addEventListener("DOMContentLoaded",function(){Stun.utils.pjaxReloadLocalSearch=function(){$(".header-nav-search").on("click",function(t){t.stopPropagation(),$("body").css("overflow","hidden"),$(".search-popup").velocity("stop").velocity("transition.expandIn",{duration:300,complete:function(){$(".search-popup input").focus()}}),$(".search-mask").velocity("stop").velocity("transition.fadeIn",{duration:300}),initSearch()}),$(".search-mask, .search-close").on("click",function(){closeSearch()}),$(document).on("keydown",function(t){t.keyCode===Stun.utils.codeToKeyCode("Escape")&&closeSearch()})},Stun.utils.pjaxReloadLocalSearch()},!1);var assistSearchList=window.CONFIG.assistSearch;Array.isArray(assistSearchList)&&assistSearchList.forEach(function(t){document.querySelector(".search-btns-item--"+t).addEventListener("click",function(){extSearch(t)},!1)})</script><script src="https://cdn.jsdelivr.net/npm/pjax@latest/pjax.min.js"></script><script>window.addEventListener("DOMContentLoaded",function(){new Pjax({selectors:["head title","#main",".pjax-reload",".header-inner"],history:!0,scrollTo:0,scrollRestoration:!0,cacheBust:!1,debug:!1,currentUrlFullReload:!0,timeout:0});var e=null;document.addEventListener("pjax:send",function(){$(".header-nav-menu").removeClass("show"),CONFIG.pjax&&CONFIG.pjax.avoidBanner&&$("html").velocity("scroll",{duration:500,offset:0,easing:"easeInOutCubic"});var a=20;$(".loading-bar").addClass("loading"),$(".loading-bar__progress").css("width",a+"%"),clearInterval(e),e=setInterval(function(){95<(a+=3)&&(a=95),$(".loading-bar__progress").css("width",a+"%")},500)},!1),window.addEventListener("pjax:complete",function(){clearInterval(e),$(".loading-bar__progress").css("width","100%"),$(".loading-bar").removeClass("loading"),setTimeout(function(){$(".loading-bar__progress").css("width","0")},400),$("link[rel=prefetch], script[data-pjax-rm]").each(function(){$(this).remove()}),$("script[data-pjax], #pjax-reload script").each(function(){$(this).parent().append($(this).remove())}),Stun.utils.pjaxReloadBoot&&Stun.utils.pjaxReloadBoot(),Stun.utils.pjaxReloadScroll&&Stun.utils.pjaxReloadScroll(),Stun.utils.pjaxReloadSidebar&&Stun.utils.pjaxReloadSidebar(),Stun.utils.pjaxReloadHeader&&Stun.utils.pjaxReloadHeader(),Stun.utils.pjaxReloadScrollIcon&&Stun.utils.pjaxReloadScrollIcon(),Stun.utils.pjaxReloadLocalSearch&&Stun.utils.pjaxReloadLocalSearch()},!1)},!1)</script><div id="pjax-reload"><link href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css" rel="stylesheet" type="text/css"><link href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/copy-tex.css" rel="stylesheet" type="text/css"><script src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/copy-tex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/quicklink@1.0.1/dist/quicklink.umd.js"></script><script>function initQuicklink(){quicklink({timeout:"10000",priority:!0,ignores:[i=>i.includes("#"),i=>"https://voyage-li.github.io/2021/07/15/md-html/"===i,/\/api\/?/,i=>i.includes(".xml"),i=>i.includes(".zip"),(i,t)=>t.hasAttribute("nofollow"),(i,t)=>t.hasAttribute("noprefetch")]})}initQuicklink()</script><script src="https://cdn.jsdelivr.net/gh/sukkaw/busuanzi@latest/bsz.pure.mini.js" async></script></div><script src="https://cdn.jsdelivr.net/npm/leancloud-storage@latest/dist/av-min.js"></script><script src="/js/Valine.min.js"></script><script data-pjax="">function loadValine(){var a=["nick","mail","link"],n="nick,mail".split(",").filter(function(n){return-1<a.indexOf(n)});new Valine({el:"#valine-container",appId:"QTR0840FHQ2lUL9IBbB4Jy6q-gzGzoHsz",appKey:"Nespb21fo2DLDIOnIg3hcFSC",notify:!0,verify:!0,enableQQ:!0,placeholder:"留下一句评论再走吧（请使用markdown语法）",avatar:"monsterid",meta:n,pageSize:"10",visitor:!0,recordIP:!0,lang:"zh-cn",path:window.location.pathname})}loadValine()</script><script src="/js/utils.js?v=2.6.2"></script><script src="/js/stun-boot.js?v=2.6.2"></script><script src="/js/scroll.js?v=2.6.2"></script><script src="/js/header.js?v=2.6.2"></script><script src="/js/sidebar.js?v=2.6.2"></script><script type="application/json" src="/search.json"></script></body></html>